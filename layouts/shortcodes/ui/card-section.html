{{/* Params: 
    - slot: "header" | "content" | "footer" (Default: content)
    - class: string
    - title: string
    - description: string
    - as_action: "true" (Jika ingin contentnya dianggap sebagai tombol action di header)
*/}}

{{ $slot := .Get "slot" | default "content" }}
{{ $asAction := eq (.Get "as_action") "true" }}

{{/* 1. Tentukan isi .Inner masuk ke mana (Action atau Children?) */}}
{{ $actionContent := "" }}
{{ $childrenContent := "" }}

{{ if $asAction }}
    {{ $actionContent = .Inner }}
{{ else }}
    {{ $childrenContent = .Inner }}
{{ end }}

{{/* 2. Bungkus data menjadi Dictionary (Sesuai ekspektasi Partial) */}}
{{ $data := dict 
    "class"       (.Get "class")
    "title"       (.Get "title")
    "description" (.Get "description")
    "action"      $actionContent
    "children"    $childrenContent
}}

{{/* 3. Kirim ke Parent */}}
{{ with .Parent }}
    {{ .Scratch.Set $slot $data }}
{{ else }}
    {{ errorf "Shortcode 'ui/card-section' harus berada di dalam 'ui/card'" }}
{{ end }}