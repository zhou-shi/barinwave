{{/* Params: class, title, description (Fallback untuk simple card) */}}

{{/* 1. Jalankan Inner Content agar anak-anak (card-section) bekerja */}}
{{/* Kita simpan outputnya di variabel, jaga-jaga kalau user nulis teks biasa tanpa section */}}
{{ $innerContent := .Inner }}

{{/* 2. Ambil Data dari Scratch (Yang disetor oleh card-section) */}}
{{ $headerData := .Scratch.Get "header" }}
{{ $contentData := .Scratch.Get "content" }}
{{ $footerData := .Scratch.Get "footer" }}

{{/* 3. LOGIKA FALLBACK (Cerdas) */}}

{{/* A. Jika tidak ada section header, tapi user kirim param title di parent */}}
{{ if not $headerData }}
    {{ if or (.Get "title") (.Get "description") }}
        {{ $headerData = dict 
            "title" (.Get "title") 
            "description" (.Get "description") 
        }}
    {{ end }}
{{ end }}

{{/* B. Jika tidak ada section content, gunakan text apapun yang ada di dalam card */}}
{{ if not $contentData }}
    {{ if $innerContent }}
        {{/* Trim whitespace agar tidak merender spasi kosong */}}
        {{ $trimmed := trim $innerContent "\n\r " }}
        {{ if ne $trimmed "" }}
            {{ $contentData = $innerContent }}
        {{ end }}
    {{ end }}
{{ end }}

{{/* 4. Panggil Partial Utama */}}
{{ partial "ui/card.html" (dict 
    "class"   (.Get "class")
    "header"  $headerData
    "content" $contentData
    "footer"  $footerData
) }}